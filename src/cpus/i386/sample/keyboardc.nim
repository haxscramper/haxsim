import
  commonh
proc _putc*(a0: char): void = 
  discard 

var keytable_n: array[127, uint8] = @([
                0x0, 
                0x0, 
                49, 
                50, 
                51, 
                52, 
                53, 
                54, 
                55, 
                56, 
                57, 
                48, 
                45, 
                94, 
                0x0, 
                0, 
                113, 
                119, 
                101, 
                114, 
                116, 
                121, 
                117, 
                105, 
                111, 
                112, 
                64, 
                91, 
                0xa, 
                0x0, 
                97, 
                115, 
                100, 
                102, 
                103, 
                104, 
                106, 
                107, 
                108, 
                59, 
                58, 
                32, 
                0x0, 
                93, 
                122, 
                120, 
                99, 
                118, 
                98, 
                110, 
                109, 
                44, 
                46, 
                47, 
                0x0, 
                42, 
                0x0, 
                32, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                55, 
                56, 
                57, 
                45, 
                52, 
                53, 
                54, 
                43, 
                49, 
                50, 
                51, 
                48, 
                46, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                92, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0
              ])
var keytable_s: array[127, uint8] = @([
                0x0, 
                0x0, 
                33, 
                34, 
                35, 
                36, 
                37, 
                38, 
                92, 
                40, 
                41, 
                126, 
                61, 
                126, 
                0x0, 
                0, 
                81, 
                87, 
                69, 
                82, 
                84, 
                89, 
                85, 
                73, 
                79, 
                80, 
                96, 
                123, 
                0xa, 
                0x0, 
                65, 
                83, 
                68, 
                70, 
                71, 
                72, 
                74, 
                75, 
                76, 
                43, 
                42, 
                32, 
                0x0, 
                125, 
                90, 
                88, 
                67, 
                86, 
                66, 
                78, 
                77, 
                60, 
                62, 
                63, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                95, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0, 
                0x0
              ])
proc print_key*(scancode: uint8): void = 
  var shift: bool = false
  var buf: array[2, uint8] = @([0])
  case scancode:
    of 0x2a, 0x36:
      shift = true
    of 0xaa, 0xb6:
      shift = false
    else:
      if not((scancode and 0x80)):
        _putc((if shift:
            keytable_s[scancode]
          
          else:
            keytable_n[scancode]
          ))
      
